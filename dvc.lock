schema: '2.0'
stages:
  data_download:
    cmd: python mlops/download_csv.py
    deps:
    - path: mlops/download_csv.py
      hash: md5
      md5: a107eec41156129c5f431e52b83b8470
      size: 807
    params:
      params.yaml:
        data_download.url: 
          https://raw.githubusercontent.com/campusx-official/jupyter-masterclass/main/tweet_emotions.csv
    outs:
    - path: data/external
      hash: md5
      md5: 207b9fa45c0e17579539b425c7eb1b93.dir
      size: 3768210
      nfiles: 1
  data_preprocess:
    cmd: python mlops/create_datasets.py
    deps:
    - path: data/external
      hash: md5
      md5: 207b9fa45c0e17579539b425c7eb1b93.dir
      size: 3768210
      nfiles: 1
    - path: mlops/create_datasets.py
      hash: md5
      md5: db91c3bd0bb53c199f80dbae80f3220e
      size: 1311
    outs:
    - path: data/raw
      hash: md5
      md5: fb326d2eec197669f9638afde28356bf.dir
      size: 827973
      nfiles: 2
  data_transform:
    cmd: python mlops/data_preprocessing.py
    deps:
    - path: data/raw
      hash: md5
      md5: 2d655cbffb9458a92350a48921896c05.dir
      size: 827973
      nfiles: 2
    - path: mlops/data_preprocessing.py
      hash: md5
      md5: 35e68ded5ba66ff6d1e23be7e5c89c1f
      size: 3231
    outs:
    - path: data/processed
      hash: md5
      md5: 94c0aa98c1e7cbfa676d798e46764dcd.dir
      size: 572486
      nfiles: 2
  feature_engineering:
    cmd: python mlops/feature_engineering.py
    deps:
    - path: data/processed
      hash: md5
      md5: 94c0aa98c1e7cbfa676d798e46764dcd.dir
      size: 572486
      nfiles: 2
    - path: mlops/feature_engineering.py
      hash: md5
      md5: bbbb8820118667aade3e2b07f70db000
      size: 2024
    params:
      params.yaml:
        feature_engineering:
          cv_max_features: 51
    outs:
    - path: data/interim
      hash: md5
      md5: 86488cac0c80ed0f7eab30e556717754.dir
      size: 1089570
      nfiles: 2
  model_building:
    cmd: python mlops/train.py
    deps:
    - path: data/interim
      hash: md5
      md5: 86488cac0c80ed0f7eab30e556717754.dir
      size: 1089570
      nfiles: 2
    - path: mlops/train.py
      hash: md5
      md5: 9a8b2d4726f0135740c81bab58a2f703
      size: 944
    params:
      params.yaml:
        train.gbc_n_estimators: 64
    outs:
    - path: models/gbc_model.pkl
      hash: md5
      md5: a6f20e0ea738ae170161343045e8eb92
      size: 87580
  model_prediction:
    cmd: python mlops/predict.py
    deps:
    - path: mlops/predict.py
      hash: md5
      md5: 78fdb54002984439fa0f9323c8ac0de1
      size: 667
    - path: models/gbc_model.pkl
      hash: md5
      md5: 478f453f906d8c04e4017bed4fc067b4
      size: 67726
  model_evaluation:
    cmd: python mlops/evaluation.py
    deps:
    - path: mlops/evaluation.py
      hash: md5
      md5: 0d9280a2e65371a98e6026d782c4468c
      size: 1093
    - path: models/gbc_model.pkl
      hash: md5
      md5: a6f20e0ea738ae170161343045e8eb92
      size: 87580
    outs:
    - path: reports/metrics_gbc.json
      hash: md5
      md5: bd1c549c5db763479a29c0bb2fef15b9
      size: 336
  create_datasets:
    cmd: python mlops/create_datasets.py
    deps:
    - path: data/external
      hash: md5
      md5: 207b9fa45c0e17579539b425c7eb1b93.dir
      size: 3768210
      nfiles: 1
    - path: mlops/create_datasets.py
      hash: md5
      md5: 1627a0f0fced995ada21b61079daf537
      size: 1788
    params:
      params.yaml:
        create_datasets.random_state: 47
        create_datasets.test_size: 0.4
    outs:
    - path: data/raw
      hash: md5
      md5: 2d655cbffb9458a92350a48921896c05.dir
      size: 827973
      nfiles: 2
